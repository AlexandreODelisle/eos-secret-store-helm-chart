# External Secret Operator CRD suite deployment

## Objective

Handling the creation of the `ServiceAccount` and related requirements prior to the `SecretStore` creation. Provide an array to create mutliple `ExternalSecret` that can use the providers.

Provide examples to implement the policies in each tool and the connection between the Kubernetes cluster and the secret manager.

## Limitations

Only Hashicorp Vault provider is currently supported.

[//]: # (README.md generated by gotmpl. DO NOT EDIT.)

![Type: application](https://img.shields.io/badge/Type-application-informational?style=flat-square) ![Version: 0.2.1](https://img.shields.io/badge/Version-0.2.1-informational?style=flat-square)

Handling SecretStore or ClusterSecretStore for Vault with EOS

## Installing the Chart

To install the `eos-secret-store` deployment:

```bash
helm pull add oci://ghcr.io/alexandreodelisle/eos-secret-store
helm install eos-secret-store ghcr.io/alexandreodelisle/eos-secret-store
```

### Custom Resources
If external-secret-operator Helm Chart and the CRDs are not installed you can enable it within the values.

## Uninstalling the Chart
To uninstall the `eos-secret-store` deployment:

```bash
helm uninstall eos-secret-store
```

## Values

| Key | Type | Default | Description |
|-----|------|---------|-------------|
| external-secrets.enabled | bool | `false` |  |
| externalSecretsDefaults.creationPolicy | string | `"Owner"` |  |
| externalSecretsDefaults.refreshInterval | string | `"1h"` |  |
| externalSecretsDefaults.secretStoreRef | string | `"vault-backend"` |  |
| externalSecrets[0].data[0].remoteKey | string | `"path/to/vault/secret"` |  |
| externalSecrets[0].data[0].remoteProperty | string | `"my-key"` |  |
| externalSecrets[0].data[0].secretKey | string | `"my-key"` |  |
| externalSecrets[0].name | string | `"my-app-secret"` |  |
| externalSecrets[0].namespace | string | `"default"` |  |
| externalSecrets[0].targetName | string | `"my-app-secret"` |  |
| rbac.clusterRoleBindingName | string | `"vault-tokenreview-binding"` |  |
| rbac.roleBindingName | string | `"vault-reader-binding"` |  |
| rbac.roleName | string | `"vault-reader"` |  |
| rbac.serviceAccountName | string | `"vault-sa"` |  |
| rbac.tokenSecretName | string | `"vault-sa-token"` |  |
| secretStore.name | string | `"vault-backend"` |  |
| secretStore.vault.mountPath | string | `"test-cluster"` |  |
| secretStore.vault.path | string | `"homelab"` |  |
| secretStore.vault.role | string | `"my-app-vault-role"` |  |
| secretStore.vault.server | string | `"https://vault.myinstance.com"` |  |